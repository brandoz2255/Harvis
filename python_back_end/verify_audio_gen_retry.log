INFO:__main__:ğŸ§ª Testing AudioGenerator with Chatterbox (expecting CPU fallback)...
WARNING:model_manager:âš ï¸ Patching missing 'PerthImplicitWatermarker' in perth module
INFO:model_manager:VRAM threshold set to 10.0 GiB
INFO:model_manager:ğŸ”Š Loading TTS model on device: cuda
INFO:model_manager:ğŸ“ HuggingFace cache directory: /home/ommblitz/.cache/huggingface
INFO:model_manager:ğŸ“¦ HF cache contains 2 items: ['hub', 'xet']
INFO:model_manager:ğŸ”§ Starting comprehensive CUDA diagnostics for TTS...
INFO:model_manager:ğŸ“Š CUDA Device Count: 1
INFO:model_manager:ğŸ“Š Current CUDA Device: 0
INFO:model_manager:ğŸ“Š CUDA Device Name: NVIDIA GeForce RTX 5070 Laptop GPU
INFO:model_manager:ğŸ§ª Testing basic CUDA memory operations...
INFO:model_manager:âœ… Basic CUDA tensor creation successful: cuda:0
WARNING:model_manager:âš ï¸ pynvml not available, skipping NVML memory check
INFO:model_manager:ğŸ”§ Performing aggressive GPU memory cleanup before TTS...
INFO:model_manager:ğŸ” GPU Memory before TTS load after cleanup: 0.00GB allocated, 0.00GB reserved, 7.50GB free
INFO:model_manager:ğŸš€ Attempting ChatterboxTTS.from_pretrained(device='cuda')...
INFO:model_manager:âœ… ChatterboxTTS import successful
INFO:model_manager:ğŸ”„ Loading ChatterboxTTS with cache_dir=/home/ommblitz/.cache/huggingface
INFO:model_manager:ğŸ“¥ This may use cached models or download if cache is missing...
INFO:httpx:HTTP Request: HEAD https://huggingface.co/ResembleAI/chatterbox/resolve/main/ve.safetensors "HTTP/1.1 302 Found"
INFO:httpx:HTTP Request: HEAD https://huggingface.co/ResembleAI/chatterbox/resolve/main/t3_cfg.safetensors "HTTP/1.1 302 Found"
INFO:httpx:HTTP Request: HEAD https://huggingface.co/ResembleAI/chatterbox/resolve/main/s3gen.safetensors "HTTP/1.1 302 Found"
INFO:httpx:HTTP Request: HEAD https://huggingface.co/ResembleAI/chatterbox/resolve/main/tokenizer.json "HTTP/1.1 307 Temporary Redirect"
INFO:httpx:HTTP Request: HEAD https://huggingface.co/api/resolve-cache/models/ResembleAI/chatterbox/05e904af2b5c7f8e482687a9d7336c5c824467d9/tokenizer.json "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: HEAD https://huggingface.co/ResembleAI/chatterbox/resolve/main/conds.pt "HTTP/1.1 302 Found"
/home/ommblitz/.local/lib/python3.12/site-packages/diffusers/models/lora.py:393: FutureWarning: `LoRACompatibleLinear` is deprecated and will be removed in version 1.0.0. Use of `LoRACompatibleLinear` is deprecated. Please switch to PEFT backend by installing PEFT: `pip install peft`.
  deprecate("LoRACompatibleLinear", "1.0.0", deprecation_message)
INFO:root:input frame rate=25
INFO:model_manager:âœ… TTS model loaded successfully on CUDA
INFO:model_manager:ğŸ™ï¸ Generating speech for text (length: 47 chars)
INFO:model_manager:ğŸ“ Normalized text: This is a test of the emergency podcast system....
INFO:model_manager:ğŸ”Š Starting TTS generation on CUDA (exaggeration=0.5, temp=0.8)
/usr/lib/python3.12/contextlib.py:105: FutureWarning: `torch.backends.cuda.sdp_kernel()` is deprecated. In the future, this context manager will be removed. Please see `torch.nn.attention.sdpa_kernel()` for the new context manager, with updated signature.
  self.gen = func(*args, **kwds)
`sdpa` attention does not support `output_attentions=True`. Please set your attention to `eager` if you want any of these features.
Sampling:   0%|          | 0/1000 [00:00<?, ?it/s]Sampling:   0%|          | 3/1000 [00:00<00:35, 28.02it/s]Sampling:   1%|          | 11/1000 [00:00<00:17, 55.38it/s]Sampling:   2%|â–         | 19/1000 [00:00<00:15, 64.20it/s]Sampling:   3%|â–         | 27/1000 [00:00<00:13, 69.93it/s]Sampling:   4%|â–         | 35/1000 [00:00<00:13, 72.55it/s]Sampling:   4%|â–         | 43/1000 [00:00<00:12, 74.72it/s]Sampling:   5%|â–Œ         | 52/1000 [00:00<00:12, 78.63it/s]Sampling:   6%|â–Œ         | 62/1000 [00:00<00:11, 84.64it/s]INFO:chatterbox.models.t3.t3:âœ… EOS token detected! Stopping generation at step 65
Sampling:   6%|â–‹         | 64/1000 [00:00<00:12, 74.51it/s]
INFO:model_manager:âœ… TTS generation completed, audio shape: torch.Size([1, 61440])
INFO:__main__:âœ… Generation Success: /tmp/podcast_test/audio/test_fallback.wav
INFO:__main__:âœ… Audio file is valid.
