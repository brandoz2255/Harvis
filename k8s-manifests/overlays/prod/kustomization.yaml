apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Base resources
resources:
  - ../../services/backend-rockyvms.yaml
  - ../../services/frontend.yaml
  - ../../services/nginx.yaml
  - ../../services/ollama-dedicated.yaml

# Namespace
namespace: ai-agents

# Common labels
commonLabels:
  app.kubernetes.io/part-of: harvis-ai
  app.kubernetes.io/managed-by: argocd

# Image updates - these get updated by ArgoCD Image Updater or manually
images:
  - name: harvis-backend
    newName: dulc3/jarvis-backend
    newTag: v2.28.10
  - name: harvis-frontend
    newName: dulc3/jarvis-frontend
    newTag: v2.28.10

# Patches for production
patches:
  - target:
      kind: Deployment
      name: harvis-ai-backend
    patch: |
      - op: replace
        path: /spec/replicas
        value: 2
